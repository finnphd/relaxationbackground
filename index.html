<!DOCTYPE html>
<html>
<head>
    <title>Audio Player with Background Noise</title>
</head>
<body>
    <svg id="play" viewBox="0 0 200 200" style="margin: auto; width: 90vw; height: 90vh">
        <circle cx="100" cy="100" r="100" />
        <polygon fill="#FFFFFF" points="146.5,100 71.5,56.7 71.5,143.3" />
    </svg>

    <div id="noise-selector">
        <button id="play-white-noise">Play White Noise</button>
        <button id="play-pink-noise">Play Pink Noise</button>
        <button id="play-brownian-noise">Play Brownian Noise</button>
    </div>

    <script>
        // Existing code for audio playback
        if (typeof Audio !== "undefined") {
            const audioObj = new Audio("./Responsive Hypnosis Example.mp3");
            const playButton = document.getElementById('play');

            playButton.addEventListener('mousedown', startAudio);
            playButton.addEventListener('mouseup', stopAudio);
            playButton.addEventListener('touchstart', startAudio);
            playButton.addEventListener('touchend', stopAudio);

            // Add event listeners for the spacebar key
            document.addEventListener('keydown', function (event) {
                if (event.key === 'Space' || event.keyCode === 32) {
                    startAudio(event);
                }
            });

            document.addEventListener('keyup', function (event) {
                if (event.key === 'Space' || event.keyCode === 32) {
                    stopAudio(event);
                }
            });

            audioObj.addEventListener('error', function () {
                console.error('Audio could not be loaded.');
            });

            function startAudio(e) {
                e.preventDefault(); // Prevent the default behavior to avoid issues with spacebar press
                audioObj.play();
                playButton.style.margin = "10px";
            }

            function stopAudio() {
                audioObj.pause();
                playButton.style.margin = "0";
            }
        } else {
            console.error("Audio is not supported in this browser.");
        }

        // Function to generate background noise
        function generateNoise(type) {
            const noiseAudio = new Audio();

            // Set the source of the noise audio based on the selected type
            switch (type) {
                case 'white':
                    noiseAudio.src = 'white-noise.mp3';
                    break;
                case 'pink':
                    noiseAudio.src = 'pink-noise.mp3';
                    break;
                case 'brownian':
                    noiseAudio.src = 'brownian-noise.mp3';
                    break;
                default:
                    console.error('Invalid noise type.');
                    return;
            }

            noiseAudio.loop = true;
            noiseAudio.play();
        }

        // Event listeners for noise buttons
        const whiteNoiseButton = document.getElementById('play-white-noise');
        whiteNoiseButton.addEventListener('click', () => generateNoise('white'));

        const pinkNoiseButton = document.getElementById('play-pink-noise');
        pinkNoiseButton.addEventListener('click', () => generateNoise('pink'));

        const brownianNoiseButton = document.getElementById('play-brownian-noise');
        brownianNoiseButton.addEventListener('click', () => generateNoise('brownian'));
    </script>
</body>
</html>
